{"version":3,"sources":["webpack:///./assets/img/token.png","webpack:///./pages/approve.vue?52d0","webpack:///pages/approve.vue","webpack:///./pages/approve.vue?d9da","webpack:///./pages/approve.vue"],"names":["module","exports","__webpack_require__","p","staticRenderFns","_h","this","$createElement","_c","_self","staticClass","attrs","src","alt","BN","pages_approvevue_type_script_lang_js_","data","approveSize","isApproved","infoBox","computed","Object","objectSpread","vuex_esm","isNotEnoughTokens","balance","tokenBalance","required","totalTokens","isLessThan","approveButtonText","hasEnoughApprovedTokens","isLoading","approveTx","status","txStatus","waitingForReciept","success","beforeCreate","$store","state","distribution","list","length","dispatch","mounted","$nuxt","$loading","finish","methods","approveButtonAction","_approveButtonAction","asyncToGenerator","regeneratorRuntime","mark","_callee","wrap","_context","prev","next","sendApprove","sent","goToTheNextPage","stop","apply","arguments","component","componentNormalizer","_vm","_v","_s","toDecimals","allowance","getTokenSymbol","networkConfig","currencyName","ethBalance","hidden","size","native-value","model","value","callback","$$v","expression","class","txStatusClass","href","txExplorerUrl","target","txHashToRender","_e","id","loading","type","icon-right","rounded","on","click","active","update:active","$event","$set","_m","__webpack_exports__"],"mappings":"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","file":"c37a0f54d89359719e34.js","sourcesContent":["module.exports = __webpack_public_path__ + \"img/c4642c3.png\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column is-half-desktop\"},[_c('div',{staticClass:\"token-info\"},[_c('div',{staticClass:\"token-info__item\"},[_c('div',{staticClass:\"token-info__name\"},[_vm._v(\"\\n          Your current multisender approval\\n        \")]),_vm._v(\" \"),_c('div',{staticClass:\"token-info__value\"},[_vm._v(\"\\n          \"+_vm._s(_vm.toDecimals(_vm.allowance))+\"\\n        \")])]),_vm._v(\" \"),_c('div',{staticClass:\"token-info__item\"},[_c('div',{staticClass:\"token-info__name\"},[_vm._v(\"\\n          Total number of tokens to send\\n        \")]),_vm._v(\" \"),_c('div',{staticClass:\"token-info__value\"},[_vm._v(_vm._s(_vm.toDecimals(_vm.totalTokens))+\" \"+_vm._s(_vm.getTokenSymbol))])]),_vm._v(\" \"),_c('div',{staticClass:\"token-info__item\"},[_c('div',{staticClass:\"token-info__name\"},[_vm._v(\"\\n          Your token balance\\n        \")]),_vm._v(\" \"),_c('div',{staticClass:\"token-info__value\"},[_vm._v(_vm._s(_vm.toDecimals(_vm.tokenBalance))+\" \"+_vm._s(_vm.getTokenSymbol))])]),_vm._v(\" \"),_c('div',{staticClass:\"token-info__item\"},[_c('div',{staticClass:\"token-info__name\"},[_vm._v(\"Your \"+_vm._s(_vm.networkConfig.currencyName)+\" balance\")]),_vm._v(\" \"),_c('div',{staticClass:\"token-info__value\"},[_vm._v(\"\\n          \"+_vm._s(_vm.toDecimals(_vm.ethBalance, 18))+\"\\n        \")])])]),_vm._v(\" \"),_c('div',{attrs:{\"hidden\":_vm.isNotEnoughTokens}},[_c('div',{staticClass:\"token-field\"},[_c('div',{staticClass:\"label\"},[_vm._v(\"Amount to approve\")]),_vm._v(\" \"),_c('div',{staticClass:\"field\"},[_c('b-radio',{attrs:{\"size\":\"is-medium\",\"native-value\":_vm.totalTokens},model:{value:(_vm.approveSize),callback:function ($$v) {_vm.approveSize=$$v},expression:\"approveSize\"}},[_vm._v(\"\\n            Exact amount to be sent ( \"+_vm._s(_vm.toDecimals(_vm.totalTokens))+\" \"+_vm._s(_vm.getTokenSymbol)+\" )\\n          \")])],1),_vm._v(\" \"),_c('div',{staticClass:\"field\"},[_c('b-radio',{attrs:{\"size\":\"is-medium\",\"native-value\":_vm.tokenBalance},model:{value:(_vm.approveSize),callback:function ($$v) {_vm.approveSize=$$v},expression:\"approveSize\"}},[_vm._v(\"\\n            Your full token balance ( \"+_vm._s(_vm.toDecimals(_vm.tokenBalance))+\" \"+_vm._s(_vm.getTokenSymbol)+\" )\\n          \")])],1)]),_vm._v(\" \"),(_vm.approveTx.txHash)?_c('div',{staticClass:\"token-field\"},[_c('div',{staticClass:\"label\"},[_vm._v(\"Approve transaction hash\")]),_vm._v(\" \"),_c('div',{staticClass:\"txs\"},[_c('div',{staticClass:\"txs__item\",class:_vm.txStatusClass(_vm.approveTx.status)},[_c('div',{staticClass:\"txs__status\"}),_vm._v(\" \"),_c('a',{staticClass:\"txs__address\",attrs:{\"href\":_vm.txExplorerUrl('approveTx'),\"target\":\"_blank\"}},[_vm._v(\"\\n              \"+_vm._s(_vm.txHashToRender('approveTx'))+\"\\n            \")])])])]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"field\"},[_c('b-button',{staticClass:\"is-next\",attrs:{\"id\":\"approve-and-proceed-button\",\"loading\":_vm.isLoading,\"type\":\"is-primary\",\"icon-right\":\"arrow-right\",\"rounded\":\"\"},on:{\"click\":_vm.approveButtonAction}},[_vm._v(\"\\n          \"+_vm._s(_vm.approveButtonText)+\"\\n        \")])],1)]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('b-message',{attrs:{\"type\":\"is-success\",\"active\":_vm.approveTx.status === 2 && _vm.isLoading},on:{\"update:active\":function($event){return _vm.$set(_vm.approveTx, \"status === 2 && isLoading\", $event)}}},[_vm._v(\"\\n      \"+_vm._s(_vm.infoBox)+\"\\n    \")]),_vm._v(\" \"),_c('b-message',{attrs:{\"type\":\"is-danger\",\"active\":_vm.isNotEnoughTokens},on:{\"update:active\":function($event){_vm.isNotEnoughTokens=$event}}},[_vm._v(\"\\n      Not enough tokens. Please, top-up your token balance or use smaller batch\\n    \")])],1),_vm._v(\" \"),_vm._m(0)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"column is-hidden-touch\"},[_c('div',{staticClass:\"wrap-image wrap-image--token\"},[_c('img',{staticClass:\"wrap-image__images\",attrs:{\"src\":require(\"assets/img/token.png\"),\"alt\":\"\"}})])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"columns\">\n    <div class=\"column is-half-desktop\">\n      <div class=\"token-info\">\n        <div class=\"token-info__item\">\n          <div class=\"token-info__name\">\n            Your current multisender approval\n          </div>\n          <div class=\"token-info__value\">\n            {{ toDecimals(allowance) }}\n          </div>\n        </div>\n        <div class=\"token-info__item\">\n          <div class=\"token-info__name\">\n            Total number of tokens to send\n          </div>\n          <div class=\"token-info__value\">{{ toDecimals(totalTokens) }} {{ getTokenSymbol }}</div>\n        </div>\n        <div class=\"token-info__item\">\n          <div class=\"token-info__name\">\n            Your token balance\n          </div>\n          <div class=\"token-info__value\">{{ toDecimals(tokenBalance) }} {{ getTokenSymbol }}</div>\n        </div>\n        <div class=\"token-info__item\">\n          <div class=\"token-info__name\">Your {{ networkConfig.currencyName }} balance</div>\n          <div class=\"token-info__value\">\n            {{ toDecimals(ethBalance, 18) }}\n          </div>\n        </div>\n      </div>\n\n      <div :hidden=\"isNotEnoughTokens\">\n        <div class=\"token-field\">\n          <div class=\"label\">Amount to approve</div>\n          <div class=\"field\">\n            <b-radio v-model=\"approveSize\" size=\"is-medium\" :native-value=\"totalTokens\">\n              Exact amount to be sent ( {{ toDecimals(totalTokens) }} {{ getTokenSymbol }} )\n            </b-radio>\n          </div>\n          <div class=\"field\">\n            <b-radio v-model=\"approveSize\" size=\"is-medium\" :native-value=\"tokenBalance\">\n              Your full token balance ( {{ toDecimals(tokenBalance) }} {{ getTokenSymbol }} )\n            </b-radio>\n          </div>\n        </div>\n        <div v-if=\"approveTx.txHash\" class=\"token-field\">\n          <div class=\"label\">Approve transaction hash</div>\n          <div class=\"txs\">\n            <div class=\"txs__item\" :class=\"txStatusClass(approveTx.status)\">\n              <div class=\"txs__status\"></div>\n              <a :href=\"txExplorerUrl('approveTx')\" class=\"txs__address\" target=\"_blank\">\n                {{ txHashToRender('approveTx') }}\n              </a>\n            </div>\n          </div>\n        </div>\n        <div class=\"field\">\n          <b-button\n            id=\"approve-and-proceed-button\"\n            :loading=\"isLoading\"\n            type=\"is-primary\"\n            class=\"is-next\"\n            icon-right=\"arrow-right\"\n            rounded\n            @click=\"approveButtonAction\"\n          >\n            {{ approveButtonText }}\n          </b-button>\n        </div>\n      </div>\n      <br />\n      <b-message type=\"is-success\" :active.sync=\"approveTx.status === 2 && isLoading\">\n        {{ infoBox }}\n      </b-message>\n      <b-message type=\"is-danger\" :active.sync=\"isNotEnoughTokens\">\n        Not enough tokens. Please, top-up your token balance or use smaller batch\n      </b-message>\n    </div>\n    <div class=\"column is-hidden-touch\">\n      <div class=\"wrap-image wrap-image--token\">\n        <img src=\"~assets/img/token.png\" alt=\"\" class=\"wrap-image__images\" />\n      </div>\n    </div>\n  </div>\n</template>\n<script>\n/* eslint-disable no-console */\nimport { mapState, mapGetters, mapActions } from 'vuex'\nimport txStatus from '../store/txStatus'\nconst BN = require('bignumber.js')\n\nexport default {\n  data() {\n    return {\n      approveSize: false,\n      isApproved: false,\n      infoBox: 'Preparing transactions...'\n    }\n  },\n  computed: {\n    ...mapState('distribution', ['list', 'totalTokens']),\n    ...mapState('token', ['tokenBalance', 'allowance']),\n    ...mapState('metamask', ['ethBalance']),\n    ...mapState('txHashKeeper', ['approveTx']),\n    ...mapGetters('token', ['toDecimals', 'getTokenSymbol']),\n    ...mapGetters('txHashKeeper', ['txExplorerUrl', 'txHashToRender', 'txStatusClass']),\n    ...mapGetters('metamask', ['networkConfig']),\n    ...mapGetters('distribution', ['hasEnoughApprovedTokens']),\n    isNotEnoughTokens() {\n      const balance = new BN(this.tokenBalance)\n      const required = new BN(this.totalTokens)\n      return balance.isLessThan(required)\n    },\n    approveButtonText() {\n      return !this.hasEnoughApprovedTokens ? `Approve` : `Proceed`\n    },\n    isLoading() {\n      switch (this.approveTx.status) {\n        case txStatus.waitingForReciept:\n          return true\n        case txStatus.success:\n          return !this.isApproved\n      }\n      return false\n    }\n  },\n  beforeCreate() {\n    if (this.$store.state.distribution.list.length === 0) {\n      this.$store.dispatch('router/goToIndex')\n    }\n  },\n  mounted() {\n    this.approveSize = this.tokenBalance\n    this.$nuxt.$loading.finish()\n  },\n  methods: {\n    ...mapActions('token', ['sendApprove']),\n    ...mapActions('router', ['goToTheNextPage']),\n    async approveButtonAction() {\n      if (!this.hasEnoughApprovedTokens) {\n        this.isApproved = await this.sendApprove(this.approveSize)\n      } else {\n        this.goToTheNextPage()\n      }\n    }\n  }\n}\n</script>\n","import mod from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./approve.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./approve.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./approve.vue?vue&type=template&id=c8325a0a&\"\nimport script from \"./approve.vue?vue&type=script&lang=js&\"\nexport * from \"./approve.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}